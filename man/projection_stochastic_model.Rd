% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/projection_stochastic_model.R
\name{projection_stochastic_model}
\alias{projection_stochastic_model}
\alias{add_projection_date}
\alias{plot.projection_stochastic_model}
\alias{plot_projections}
\alias{plot_projection_samples}
\alias{plot_projections_by_age_group}
\alias{create_projection_quantiles}
\alias{projection_quantiles_by_age_group}
\alias{projection_by_age_group}
\alias{create_age_group_column}
\alias{collapse_states}
\alias{difference_of_states}
\title{Project a Stochastic Model Forward in Time}
\usage{
projection_stochastic_model(asm, project_time = 30, seed = 123)

add_projection_date(psm, start_date)

\method{plot}{projection_stochastic_model}(x, ...)

plot_projections(projection, state)

plot_projection_samples(projection, state)

plot_projections_by_age_group(projection, state)

create_projection_quantiles(
  psm,
  probs = c(0.025, 0.25, 0.5, 0.75, 0.975),
  by_cols = c("time", "date")
)

projection_quantiles_by_age_group(
  psm,
  state,
  probs = c(0.025, 0.25, 0.5, 0.75, 0.975)
)

projection_by_age_group(psm, state)

create_age_group_column(psm, state, index_cols = c("date", "time"))

collapse_states(psm)

difference_of_states(psm, state)
}
\arguments{
\item{asm}{An object of class \code{abc_stochastic_model} or \code{scenario_stochastic_model}.}

\item{project_time}{Number of time steps to project forward. Defaults to
\code{30}.}

\item{seed}{An integer used to seed the parallel simulations for
reproducibility. Defaults to \code{123}.}

\item{psm}{Object of class \code{projection_stochastic_model}}

\item{start_date}{a date in yyyy-mm-dd format}

\item{x}{An object of class \code{projection_stochastic_model}}

\item{...}{other arguments including \code{state} state to plot, \code{"I"} by default
and \code{type} either show individual trajectories "samples" or summarize "quantiles",
\code{"quantiles"} by default}

\item{projection}{projection grouped using \link{projection_quantiles_by_age_group}}

\item{state}{character string e.g. "C"}

\item{probs}{vector of quantiles to plot}

\item{by_cols}{vector of columns to group by}

\item{index_cols}{columns to preserve defaults to \code{c("time","date")}}
}
\value{
An object of class \code{projection_stochastic_model}, which is a list
with the following elements:
\item{model}{The stochastic model used for simulation (of class \code{stochastic_model}).}
\item{projection}{A data frame with the projected simulations concatenated across
posterior draws and days, including any parameter updates appended as columns.}

An object of class \code{projection_stochastic_model}

tibble

tibble

tibble
}
\description{
Runs forward projections from the posterior draws of a fitted
\code{abc_stochastic_model} for a fixed number of time steps (default 30),
using region-specific states and parameter sets. Each simulation is seeded
for reproducibility and run in parallel.

If state doesn't exist e.g. "I" but has states "I_\{age\}" then
will sum over all states first before plotting

take the difference of column(s) that match on state \code{state}. This is
useful for any cumulative columns e.g. \code{INC} and \code{C} by converted them into
the incidence and case incidence respectively
}
\details{
This function takes a fitted \code{abc_stochastic_model}, extracts the
posterior state and parameter sets, then runs simulations in parallel using
\pkg{furrr}. The model is updated with each posterior draw, run forward for a
fixed time frame, interpolated to daily resolution, and combined
into a single projection data frame.
}
\examples{
\dontrun{
  projection <- psm |> projection_quantiles_by_age_group("C")
  plot_projections_by_age_group(projection,"C")
}
}
